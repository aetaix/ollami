<script>
	import { currentModel } from '$lib/stores/models';
	import { ollamaIsActivated } from '$lib/stores/states';
	import LogoWelcome from '$lib/components/sidebar/LogoWelcome.svelte';
	import DropdownModels from '../models/DropdownModels.svelte';
</script>

{#if $ollamaIsActivated}
	<div
		id="welcome"
		class="w-full max-w-lg mx-auto flex flex-col items-center text-center h-full justify-center"
	>
		{#if $currentModel}
			<LogoWelcome
				class="w-10 transition-colors duration-700 o-icon{$currentModel.className ? '-' + $currentModel.className : ''} dark:text-white"
			/>
			<h1 class="text-3xl mt-5 mb-2">The Home of LLMs, on your computer.</h1>
			<p class="opacity-50 mb-5">
				Powered by <a href="https://ollama.com/" target="_blank" class="underline">Ollama</a>
			</p>
			<DropdownModels />
		{:else}
			<h1 class="text-2xl mb-2">No model installed yet</h1>
			<a href="/models" class="rounded-lg shadow border border-black-200 px-4 py-3"
				>Install your first model</a
			>
		{/if}
	</div>
{:else}
	<div class="w-full max-w-xl mx-auto flex flex-col items-center text-center h-full justify-center">
		<svg
			width="109"
			class="mb-4"
			viewBox="0 0 109 114"
			fill="none"
			xmlns="http://www.w3.org/2000/svg"
		>
			<g clip-path="url(#clip0_0_3)">
				<path
					d="M75.11 111.83C75.56 107.52 73.98 103.65 72.25 99.71C71.91 98.93 71.51 98.18 71.13 97.42C70.51 96.19 70.83 94.72 71.81 93.75C73.6 91.96 74.41 89.72 74.9 87.32C75.88 82.5 75.62 77.73 73.82 73.11C73.42 72.08 72.8 71.16 72.13 70.27C70.89 68.64 70.8 67.01 72.16 65.54C74.85 62.64 76.08 59.17 76.03 55.28C75.95 49.56 73.74 44.78 69.27 41.16C66.24 38.7 62.76 37.61 58.83 38.28C57.2 38.56 55.98 37.95 55.3 36.49C53.01 31.57 48.93 28.92 43.85 27.75C39.82 26.82 36.08 27.89 32.62 30.06C30.89 31.14 29.37 32.45 28.2 34.13C27.75 34.78 27.36 35.49 27.01 36.21C26.31 37.68 24.71 38.46 23.09 38.24C17.72 37.51 13.47 39.79 10.06 43.99C8.7 45.67 7.7 47.62 7.08 49.69C5.21 55.95 6.15 61.28 9.84 65.36C11.36 67.04 11.38 68.62 9.93 70.34C8.57 71.96 7.88 73.9 7.43 75.92C6.31 80.94 6.41 85.91 8.32 90.79C8.75 91.9 9.5 92.84 10.34 93.68C11.08 94.42 11.48 95.28 11.35 96.36C11.31 96.67 11.24 97.01 11.09 97.28C9.4 100.35 8.27 103.6 7.83 107.09C7.61 108.82 7.53 110.53 7.71 112.25C7.85 113.55 6.44 114.45 5.34 113.73C4.95 113.48 4.57 113.23 4.19 112.98C3.43 112.48 2.73 111.89 1.97 111.39C1.59 111.14 1.51 110.83 1.5 110.41C1.44 105.82 2.45 101.46 4.25 97.27C4.47 96.76 4.49 96.4 4.15 95.92C2.2 93.08 1.24 89.85 0.890002 86.49C0.380002 81.66 0.440002 76.82 2.11 72.16C2.57 70.88 3.17 69.65 3.76 68.42C3.9 68.12 3.87 67.77 3.67 67.5C1.62 64.59 0.430002 61.33 0.110002 57.8C-0.529998 50.9 1.39 44.56 6.19 38.96C7.04 37.96 8.09 37.16 9.09 36.31C9.54 35.93 9.63 35.53 9.54 34.91C9.35 33.61 9.12 32.32 9.01 31.01C8.57 25.43 8.83 19.91 10.88 14.67C11.55 12.95 12.44 11.36 13.69 9.98C16.32 7.08 20.96 7 23.74 9.76C25.81 11.82 26.96 14.39 27.82 17.12C28.59 19.59 29.03 22.12 29.29 24.81C37.14 20.11 44.99 20.09 52.83 24.78C53.05 23.39 53.22 22.07 53.46 20.77C54.09 17.4 55.08 14.16 57.09 11.32C58.26 9.67 59.69 8.33 61.7 7.8C64.3 7.12 66.49 7.95 68.32 9.82C70.17 11.72 71.22 14.07 71.94 16.57C73.65 22.58 73.72 28.68 72.66 34.8C72.54 35.52 72.66 35.97 73.26 36.45C78.42 40.68 81.36 46.18 82.04 52.79C82.59 58.13 81.57 63.17 78.4 67.64C78.28 67.81 78.26 68.11 78.36 68.29C80.39 72 81.35 75.98 81.46 80.18C81.56 83.73 81.46 87.25 80.4 90.68C79.83 92.56 79.09 94.36 77.96 95.97C77.72 96.31 77.67 96.74 77.84 97.12C79.71 101.35 80.69 105.77 80.65 110.4C80.65 111.4 80.15 111.7 76.54 112.29M15.38 32.82C15.66 32.76 15.81 32.73 15.95 32.69C17.72 32.22 19.5 31.91 21.34 31.97C21.65 31.97 22.11 32.01 22.25 31.83C22.66 31.32 23.2 30.71 23.22 30.13C23.38 26.1 23.08 22.12 21.71 18.28C21.17 16.77 20.54 15.3 19.39 14.11C18.98 13.69 18.65 13.71 18.26 14.13C17.31 15.14 16.79 16.37 16.36 17.65C14.94 21.83 14.77 26.14 15.12 30.5C15.18 31.25 15.29 32 15.38 32.82ZM66.62 32.82C66.69 32.73 66.75 32.69 66.77 32.64C66.81 32.54 66.83 32.43 66.85 32.33C67.42 27.99 67.37 23.68 66.33 19.41C65.92 17.72 65.36 16.08 64.34 14.64C63.57 13.55 63.17 13.54 62.35 14.58C62.3 14.65 62.23 14.71 62.19 14.79C61.57 16.05 60.84 17.27 60.37 18.58C59.17 21.92 58.88 25.41 58.88 28.95C58.88 29.98 59.04 30.87 59.74 31.63C59.89 31.8 60.15 31.97 60.36 31.97C62.48 31.91 64.55 32.21 66.63 32.83L66.62 32.82Z"
					fill="black"
				/>
				<path
					d="M41.07 79.25C38.68 79.29 36.3 79.31 33.98 78.61C30.58 77.59 27.75 75.77 25.89 72.69C23.43 68.62 23.83 63.49 26.84 59.65C29.84 55.82 33.88 53.83 38.63 53.27C43.4 52.7 47.87 53.59 51.87 56.37C54.74 58.37 56.85 60.99 57.59 64.46C58.65 69.41 56.74 73.69 52.61 76.53C49.97 78.35 47 79.21 43.8 79.26C42.89 79.27 41.98 79.26 41.07 79.26V79.25ZM41.04 75.08C42.04 75.08 43.04 75.11 44.03 75.08C46.64 74.98 49.01 74.14 51.03 72.47C53.67 70.28 54.4 67.12 53.03 63.97C52.22 62.12 50.84 60.74 49.19 59.65C46.11 57.61 42.66 56.97 39.05 57.44C35.47 57.9 32.38 59.38 30.11 62.33C27.67 65.51 27.92 69.38 30.78 72.14C32.01 73.32 33.49 74.06 35.1 74.58C37.04 75.2 39.04 75.1 41.03 75.09L41.04 75.08Z"
					fill="black"
				/>
				<path
					d="M40.99 70.78C39.44 70.75 38.87 70.05 39.18 68.54C39.22 68.35 39.23 68.15 39.29 67.97C39.53 67.27 39.26 66.82 38.63 66.49C38.37 66.36 38.13 66.14 37.92 65.93C37.16 65.19 37.02 64.46 37.46 63.72C37.89 63 38.83 62.58 39.67 63.06C40.63 63.6 41.37 63.55 42.31 63.06C42.96 62.72 43.77 62.84 44.33 63.49C44.78 64.02 44.93 64.64 44.57 65.23C44.3 65.68 43.92 66.15 43.48 66.39C42.64 66.84 42.47 67.44 42.74 68.27C42.79 68.43 42.79 68.61 42.8 68.78C42.94 70.24 42.43 70.8 40.99 70.78Z"
					fill="black"
				/>
				<path
					d="M18.33 56.71C18.85 56.34 19.41 56.03 20 55.78L19.4 56.03C20.1 55.74 20.83 55.55 21.59 55.45L20.93 55.54C21.68 55.45 22.44 55.45 23.19 55.54L22.53 55.45C23 55.52 23.47 55.62 23.93 55.77C25.18 56.16 26.71 55.31 27.01 54.02C27.32 52.66 26.6 51.37 25.26 50.94C22.15 49.96 18.48 50.48 15.82 52.39C15.28 52.78 14.85 53.22 14.67 53.88C14.51 54.48 14.58 55.28 14.92 55.81C15.6 56.86 17.2 57.52 18.34 56.71H18.33Z"
					fill="black"
				/>
				<path
					d="M63.9 51.6C61.24 49.7 57.57 49.18 54.46 50.15C53.21 50.54 52.29 51.91 52.71 53.23C53.13 54.55 54.45 55.4 55.79 54.98C56.25 54.84 56.71 54.73 57.19 54.66L56.53 54.75C57.28 54.65 58.04 54.65 58.79 54.75L58.13 54.66C58.88 54.76 59.61 54.96 60.32 55.24L59.72 54.99C60.31 55.24 60.86 55.55 61.39 55.92C61.92 56.29 62.75 56.33 63.32 56.17C63.89 56.01 64.53 55.56 64.81 55.02C65.12 54.44 65.27 53.74 65.06 53.09C64.85 52.44 64.47 51.99 63.91 51.6H63.9Z"
					fill="black"
				/>
				<path
					d="M90.95 27.02C90.97 27.2 90.92 27.34 90.82 27.45C90.72 27.56 90.56 27.63 90.33 27.65L86.34 28.04C86.14 28.06 85.97 28.01 85.83 27.9C85.69 27.79 85.61 27.64 85.59 27.46C85.57 27.28 85.63 27.09 85.75 26.91L88.47 23.06L85.81 23.32C85.59 23.34 85.41 23.32 85.29 23.23C85.17 23.15 85.1 23.01 85.08 22.83C85.06 22.65 85.1 22.5 85.21 22.4C85.31 22.29 85.47 22.23 85.7 22.21L89.56 21.83C89.77 21.81 89.94 21.86 90.07 21.97C90.2 22.08 90.28 22.23 90.3 22.41C90.32 22.59 90.27 22.78 90.15 22.96L87.41 26.81L90.21 26.54C90.66 26.5 90.9 26.66 90.93 27.04L90.95 27.02Z"
					fill="black"
				/>
				<path
					d="M97.54 18.85C97.54 19.07 97.45 19.24 97.31 19.36C97.17 19.48 96.95 19.53 96.67 19.52L91.66 19.34C91.41 19.34 91.21 19.24 91.06 19.08C90.9 18.91 90.83 18.72 90.84 18.5C90.85 18.28 90.95 18.05 91.13 17.85L95.15 13.54L91.81 13.42C91.53 13.41 91.32 13.34 91.19 13.22C91.05 13.09 90.99 12.92 91 12.69C91.01 12.46 91.08 12.29 91.23 12.17C91.37 12.06 91.59 12 91.87 12.01L96.71 12.19C96.97 12.19 97.17 12.28 97.32 12.45C97.47 12.62 97.54 12.81 97.53 13.04C97.52 13.27 97.43 13.5 97.25 13.69L93.22 18L96.73 18.13C97.29 18.15 97.56 18.4 97.54 18.87V18.85Z"
					fill="black"
				/>
				<path
					d="M107.88 9.79C107.85 10.09 107.74 10.32 107.53 10.47C107.32 10.62 107.03 10.68 106.65 10.65L99.8 10.04C99.46 10.01 99.19 9.88 98.99 9.64C98.79 9.4 98.7 9.13 98.73 8.83C98.76 8.53 98.91 8.23 99.18 7.96L104.99 2.34L100.42 1.93C100.04 1.9 99.76 1.79 99.58 1.61C99.4 1.43 99.33 1.18 99.36 0.87C99.39 0.56 99.5 0.33 99.71 0.18C99.91 0.03 100.21 -0.02 100.59 0.01L107.21 0.6C107.57 0.63 107.84 0.76 108.03 0.99C108.22 1.22 108.3 1.49 108.28 1.81C108.26 2.13 108.11 2.43 107.85 2.68L102.02 8.29L106.82 8.72C107.58 8.79 107.94 9.14 107.88 9.79Z"
					fill="black"
				/>
			</g>
			<defs>
				<clipPath id="clip0_0_3">
					<rect width="108.29" height="113.98" fill="white" />
				</clipPath>
			</defs>
		</svg>

		<h1 class="text-2xl mb-2">Ollama is not running</h1>
		<p>
			Please install <a href="https://ollama.com/" target="_parent" class="underline">Ollama</a> or launch
			the application
		</p>
	</div>
{/if}

<style>
	#welcome {
		animation: appear 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
		animation-fill-mode: backwards;
	}

	@keyframes appear {
		0% {
			transform: translateY(1rem);
			opacity: 0;
		}
		100% {
			transform: translateY(0);
			opacity: 1;
		}
	}
</style>
